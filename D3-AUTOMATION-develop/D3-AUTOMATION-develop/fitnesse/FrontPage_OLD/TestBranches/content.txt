!*****> !style_green[BRANCHES]

!*****> '''5.1 POST BRANCHES'''
!*****> '''5.1.1 POST BRANCHES (branches)'''

'''5.1.1 all fields set to null '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${institutionNum}!-:admin
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": null,
        "phone": null,
        "institutionId": null,
        "address1": null,
        "address2": null,
        "address3": null,
        "address4": null,
        "city": null,
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": null
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-name is undefined but is required.-!|true|

'''5.1.2 name set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": null,
        "phone": null,
        "institutionId": null,
        "address1": null,
        "address2": null,
        "address3": null,
        "address4": null,
        "city": null,
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-companyId is undefined but is required.-!|true|

'''5.1.3 name and institutionId set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": null,
        "phone": null,
        "institutionId": 1,
        "address1": null,
        "address2": null,
        "address3": null,
        "address4": null,
        "city": null,
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-externalId is undefined but is required.-!|true|


'''5.1.4 name, institutionId and externalId set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit",
        "phone": null,
        "institutionId": 1,
        "address1": null,
        "address2": null,
        "address3": null,
        "address4": null,
        "city": null,
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Branch must have either a physical or mailing address.-!|true|

'''5.1.5 non-existent institutionId'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit10",
        "phone": null,
        "institutionId": 1465464,
        "address1": null,
        "address2": null,
        "address3": null,
        "address4": null,
        "city": null,
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit10"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

'''5.1.6 name, institutionId, externalId and address1 set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit1",
        "phone": null,
        "institutionId": 1,
        "address1": "address1",
        "address2": null,
        "address3": null,
        "address4": null,
        "city": null,
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit1"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-physicalAddress-city is undefined but is required.-!|true|

'''5.1.7 name, institutionId, externalId, city and address1 set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit1",
        "phone": null,
        "institutionId": 1,
        "address1": "address1",
        "address2": null,
        "address3": null,
        "address4": null,
        "city": "Denver",
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit1"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-physicalAddress-state is undefined but is required.-!|true|

'''5.1.8 name, institutionId, externalId, city, state and address1 set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit1",
        "phone": null,
        "institutionId": 1,
        "address1": "address1",
        "address2": null,
        "address3": null,
        "address4": null,
        "city": "Denver",
        "state": "CO",
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": null,
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit1"
    }
}-!|
|POST|/branches|200|||
|let|$branchID1|js|!-response.jsonbody.Branch.branchId-!||
|let||js|!-response.jsonbody.Branch.externalId-!|!-testExternalIdByFit1-!|
|let||js|!-response.jsonbody.Branch.phone-!|null|
|let||js|!-response.jsonbody.Branch.institutionId-!|1.0|
|let||js|!-response.jsonbody.Branch.address1-!|address1|
|let||js|!-response.jsonbody.Branch.address2-!|null|
|let||js|!-response.jsonbody.Branch.address3-!|null|
|let||js|!-response.jsonbody.Branch.address4-!|null|
|let||js|!-response.jsonbody.Branch.city-!|Denver|
|let||js|!-response.jsonbody.Branch.state-!|CO|
|let||js|!-response.jsonbody.Branch.zip-!|null|
|let||js|!-response.jsonbody.Branch.countryCode-!|US|
|let||js|!-response.jsonbody.Branch.mailingAddress1-!|null|
|let||js|!-response.jsonbody.Branch.mailingAddress2-!|null|
|let||js|!-response.jsonbody.Branch.mailingAddress3-!|null|
|let||js|!-response.jsonbody.Branch.mailingAddress4-!|null|
|let||js|!-response.jsonbody.Branch.mailingCity-!|null|
|let||js|!-response.jsonbody.Branch.mailingState-!|null|
|let||js|!-response.jsonbody.Branch.mailingZip-!|null|
|let||js|!-response.jsonbody.Branch.mailingCountryCode-!|null|
|let||js|!-response.jsonbody.Branch.mailingGeographicalCode-!|null|
|let||js|!-response.jsonbody.Branch.name-!|testNameCreatedByFit1|


'''5.1.9 name, institutionId, externalId, city. state, mailingAddress1  and address1 set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit1",
        "phone": null,
        "institutionId": 1,
        "address1": "address1",
        "address2": null,
        "address3": null,
        "address4": null,
        "city": "Denver",
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": "mailingAddress1",
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": null,
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit1"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-mailingAddress-city is undefined but is required.-!|true|


'''5.1.10 name, institutionId, externalId, city. state, mailingAddress1, mailingCity  and address1 set to not null, rest of fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit1",
        "phone": null,
        "institutionId": 1,
        "address1": "address1",
        "address2": null,
        "address3": null,
        "address4": null,
        "city": "Denver",
        "state": null,
        "zip": null,
        "countryCode": null,
        "geographicalCode": null,
        "mailingAddress1": "mailingAddress1",
        "mailingAddress2": null,
        "mailingAddress3": null,
        "mailingAddress4": null,
        "mailingCity": "Denver",
        "mailingState": null,
        "mailingZip": null,
        "mailingCountryCode": null,
        "mailingGeographicalCode": null,
        "name": "testNameCreatedByFit1"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-mailingAddress-state is undefined but is required.-!|true|

'''5.1.11 all field set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit2",
        "phone": "303-456-4578",
        "institutionId": 1,
        "address1": "address1",
        "address2": "address2",
        "address3": "address3",
        "address4": "address4",
        "city": "Denver",
        "state": "CO",
        "zip": "80247",
        "countryCode": "US",
        "geographicalCode": "123456 456123",
        "mailingAddress1": "mailingAddress1",
        "mailingAddress2": "mailingAddress2",
        "mailingAddress3": "mailingAddress3",
        "mailingAddress4": "mailingAddress4",
        "mailingCity": "Greenwood",
        "mailingState": "CO",
        "mailingZip": "80124",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78954",
        "name": "testNameCreatedByFit2"
    }
}-!|
|POST|/branches|200|||
|let|$branchID2|js|!-response.jsonbody.Branch.branchId-!||
|let||js|!-response.jsonbody.Branch.externalId-!|!-testExternalIdByFit2-!|
|let||js|!-response.jsonbody.Branch.phone-!|303-456-4578|
|let||js|!-response.jsonbody.Branch.institutionId-!|1.0|
|let||js|!-response.jsonbody.Branch.address1-!|address1|
|let||js|!-response.jsonbody.Branch.address2-!|address2|
|let||js|!-response.jsonbody.Branch.address3-!|address3|
|let||js|!-response.jsonbody.Branch.address4-!|address4|
|let||js|!-response.jsonbody.Branch.city-!|Denver|
|let||js|!-response.jsonbody.Branch.state-!|CO|
|let||js|!-response.jsonbody.Branch.zip-!|80247|
|let||js|!-response.jsonbody.Branch.countryCode-!|US|
|let||js|!-response.jsonbody.Branch.geographicalCode-!|123456 456123|
|let||js|!-response.jsonbody.Branch.mailingAddress1-!|mailingAddress1|
|let||js|!-response.jsonbody.Branch.mailingAddress2-!|mailingAddress2|
|let||js|!-response.jsonbody.Branch.mailingAddress3-!|mailingAddress3|
|let||js|!-response.jsonbody.Branch.mailingAddress4-!|mailingAddress4|
|let||js|!-response.jsonbody.Branch.mailingCity-!|Greenwood|
|let||js|!-response.jsonbody.Branch.mailingState-!|CO|
|let||js|!-response.jsonbody.Branch.mailingZip-!|80124|
|let||js|!-response.jsonbody.Branch.mailingCountryCode-!|US|
|let||js|!-response.jsonbody.Branch.mailingGeographicalCode-!|4567 78954|
|let||js|!-response.jsonbody.Branch.name-!|testNameCreatedByFit2|

'''5.1.12 same with existing externalID'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit2",
        "phone": "303-456-4578",
        "institutionId": 1,
        "address1": "address1",
        "address2": "address2",
        "address3": "address3",
        "address4": "address4",
        "city": "Denver",
        "state": "CO",
        "zip": "80247",
        "countryCode": "US",
        "geographicalCode": "123456 456123",
        "mailingAddress1": "mailingAddress1",
        "mailingAddress2": "mailingAddress2",
        "mailingAddress3": "mailingAddress3",
        "mailingAddress4": "mailingAddress4",
        "mailingCity": "Greenwood",
        "mailingState": "CO",
        "mailingZip": "80124",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78954",
        "name": "testNameCreatedByFit2"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-External id on branch already exists.  Duplicates are not allowed.-!|true|

'''5.1.13 consumer user attempt'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testExternalIdByFit2",
        "phone": "303-456-4578",
        "institutionId": 1,
        "address1": "address1",
        "address2": "address2",
        "address3": "address3",
        "address4": "address4",
        "city": "Denver",
        "state": "CO",
        "zip": "80247",
        "countryCode": "US",
        "geographicalCode": "123456 456123",
        "mailingAddress1": "mailingAddress1",
        "mailingAddress2": "mailingAddress2",
        "mailingAddress3": "mailingAddress3",
        "mailingAddress4": "mailingAddress4",
        "mailingCity": "Greenwood",
        "mailingState": "CO",
        "mailingZip": "80124",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78954",
        "name": "testNameCreatedByFit2"
    }
}-!|
|POST|/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Operation requires Admin User.-!|true|
****!
****!
!*****> '''5.2 PUT BRANCHES'''

!*****> '''5.2.1 PUT BRANCHES (/branches//{branchId})'''

'''5.2.1.1 update all fields'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "testUpdateExternalIdByFit2",
        "phone": "303-456-7897",
        "institutionId": 2,
        "address1": "Updated address1",
        "address2": "Updated address2",
        "address3": "Updated address3",
        "address4": "Updated address4",
        "city": "HIghlands Ranch",
        "state": "AR",
        "zip": "80456",
        "countryCode": "US",
        "geographicalCode": "123456 4654654",
        "mailingAddress1": "Updated mailingAddress1",
        "mailingAddress2": "Updated mailingAddress2",
        "mailingAddress3": "Updated mailingAddress3",
        "mailingAddress4": "Updated mailingAddress4",
        "mailingCity": "Omaha",
        "mailingState": "NE",
        "mailingZip": "98754",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78978",
        "name": "testUpdatedNameCreatedByFit1"
    }
}-!|
|PUT|/branches/%branchID1%|200|||
|let||js|!-response.jsonbody.Branch.branchId-!|%branchID1%|
|let||js|!-response.jsonbody.Branch.externalId-!|!-testUpdateExternalIdByFit2-!|
|let||js|!-response.jsonbody.Branch.phone-!|303-456-7897|
|let||js|!-response.jsonbody.Branch.institutionId-!|1.0|
|let||js|!-response.jsonbody.Branch.address1-!|Updated address1|
|let||js|!-response.jsonbody.Branch.address2-!|Updated address2|
|let||js|!-response.jsonbody.Branch.address3-!|Updated address3|
|let||js|!-response.jsonbody.Branch.address4-!|Updated address4|
|let||js|!-response.jsonbody.Branch.city-!|HIghlands Ranch|
|let||js|!-response.jsonbody.Branch.state-!|AR|
|let||js|!-response.jsonbody.Branch.zip-!|80456|
|let||js|!-response.jsonbody.Branch.countryCode-!|US|
|let||js|!-response.jsonbody.Branch.geographicalCode-!|123456 4654654|
|let||js|!-response.jsonbody.Branch.mailingAddress1-!|Updated mailingAddress1|
|let||js|!-response.jsonbody.Branch.mailingAddress2-!|Updated mailingAddress2|
|let||js|!-response.jsonbody.Branch.mailingAddress3-!|Updated mailingAddress3|
|let||js|!-response.jsonbody.Branch.mailingAddress4-!|Updated mailingAddress4|
|let||js|!-response.jsonbody.Branch.mailingCity-!|Omaha|
|let||js|!-response.jsonbody.Branch.mailingState-!|NE|
|let||js|!-response.jsonbody.Branch.mailingZip-!|98754|
|let||js|!-response.jsonbody.Branch.mailingCountryCode-!|US|
|let||js|!-response.jsonbody.Branch.mailingGeographicalCode-!|4567 78978|
|let||js|!-response.jsonbody.Branch.name-!|testUpdatedNameCreatedByFit1|

'''5.2.1.2 update externalId to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "",
        "phone": "303-456-7897",
        "institutionId": 2,
        "address1": "Updated address1",
        "address2": "Updated address2",
        "address3": "Updated address3",
        "address4": "Updated address4",
        "city": "HIghlands Ranch",
        "state": "AR",
        "zip": "80456",
        "countryCode": "US",
        "geographicalCode": "123456 4654654",
        "mailingAddress1": "Updated mailingAddress1",
        "mailingAddress2": "Updated mailingAddress2",
        "mailingAddress3": "Updated mailingAddress3",
        "mailingAddress4": "Updated mailingAddress4",
        "mailingCity": "Omaha",
        "mailingState": "NE",
        "mailingZip": "98754",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78978",
        "name": "testUpdatedNameCreatedByFit1"
    }
}-!|
|PUT|/branches/%branchID1%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-externalId is undefined but is required.-!|true|

'''5.2.1.3 update name to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "UPdateTest",
        "phone": "303-456-7897",
        "institutionId": 2,
        "address1": "Updated address1",
        "address2": "Updated address2",
        "address3": "Updated address3",
        "address4": "Updated address4",
        "city": "HIghlands Ranch",
        "state": "AR",
        "zip": "80456",
        "countryCode": "US",
        "geographicalCode": "123456 4654654",
        "mailingAddress1": "Updated mailingAddress1",
        "mailingAddress2": "Updated mailingAddress2",
        "mailingAddress3": "Updated mailingAddress3",
        "mailingAddress4": "Updated mailingAddress4",
        "mailingCity": "Omaha",
        "mailingState": "NE",
        "mailingZip": "98754",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78978",
        "name": ""
    }
}-!|
|PUT|/branches/%branchID1%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-name is undefined but is required.-!|true|


'''5.2.1.4 update address1 to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": null,
        "externalId": "UPdateTest",
        "phone": "303-456-7897",
        "institutionId": 2,
        "address1": "",
        "address2": "Updated address2",
        "address3": "Updated address3",
        "address4": "Updated address4",
        "city": "HIghlands Ranch",
        "state": "AR",
        "zip": "80456",
        "countryCode": "US",
        "geographicalCode": "123456 4654654",
        "mailingAddress1": "Updated mailingAddress1",
        "mailingAddress2": "Updated mailingAddress2",
        "mailingAddress3": "Updated mailingAddress3",
        "mailingAddress4": "Updated mailingAddress4",
        "mailingCity": "Omaha",
        "mailingState": "NE",
        "mailingZip": "98754",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78978",
        "name": "testName"
    }
}-!|
|PUT|/branches/%branchID1%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-physicalAddress-address1 is undefined but is required.-!|true|

'''5.2.1.4 update mailingAddress1 to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": -!%branchID1%!-,
        "externalId": "UPdateTest",
        "phone": "303-456-7897",
        "institutionId": 2,
        "address1": "address1",
        "address2": "Updated address2",
        "address3": "Updated address3",
        "address4": "Updated address4",
        "city": "HIghlands Ranch",
        "state": "AR",
        "zip": "80456",
        "countryCode": "US",
        "geographicalCode": "123456 4654654",
        "mailingAddress1": "",
        "mailingAddress2": "Updated mailingAddress2",
        "mailingAddress3": "Updated mailingAddress3",
        "mailingAddress4": "Updated mailingAddress4",
        "mailingCity": "Omaha",
        "mailingState": "NE",
        "mailingZip": "98754",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78978",
        "name": "testName"
    }
}-!|
|PUT|/branches/%branchID1%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument branch-business-mailingAddress-address1 is undefined but is required.-!|true|

'''5.2.1.5 consumer user attempts to update'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|setBody|!-{
    "Branch": {
        "branchId": -!%branchID1%!-,
        "externalId": "UPdateTest",
        "phone": "303-456-7897",
        "institutionId": 2,
        "address1": "address1",
        "address2": "Updated address2",
        "address3": "Updated address3",
        "address4": "Updated address4",
        "city": "HIghlands Ranch",
        "state": "AR",
        "zip": "80456",
        "countryCode": "US",
        "geographicalCode": "123456 4654654",
        "mailingAddress1": "U",
        "mailingAddress2": "Updated mailingAddress2",
        "mailingAddress3": "Updated mailingAddress3",
        "mailingAddress4": "Updated mailingAddress4",
        "mailingCity": "Omaha",
        "mailingState": "NE",
        "mailingZip": "98754",
        "mailingCountryCode": "US",
        "mailingGeographicalCode": "4567 78978",
        "name": "testName"
    }
}-!|
|PUT|/branches/%branchID1%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Operation requires Admin User.-!|true|
****!
!*****> '''5.2.2 PUT BRANCHES (branches//search)'''

'''5.2.2.1 consumer type of user'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|setBody|!-{
    "SelectionCriteriaBranch": {
        "pageRange": null,
        "externalId": null,
        "name": null,
        "companyDescription": null,
        "companyId": null,
        "isDeleted": null
    }
}-!|
|PUT|/branches/search|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Operation requires Admin User.-!|true|

'''5.2.2.2 all fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaBranch": {
        "pageRange": null,
        "externalId": null,
        "name": null,
        "companyDescription": null,
        "companyId": null,
        "isDeleted": null
    }
}-!|
|PUT|/branches/search|200|||

'''5.2.2.3 pageRange set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-
{
    "SelectionCriteriaBranch": {
        "pageRange": null,
        "isDeleted": 0
    }
}
-!|
|PUT|/branches/search|200|||

'''5.2.2.4 externalId set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-
{
    "SelectionCriteriaBranch": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 2
            }
        }, 
        "externalId": "testUpdateExternalIdByFit",
        "isDeleted": 0
    }
}
-!|
|PUT|/branches/search|200|||
|let||js|!-response.jsonbody[0].branchId-!|%branchID1%|
|let||js|!-response.jsonbody[0].externalId-!|!-testUpdateExternalIdByFit2-!|
|let||js|!-response.jsonbody[0].phone-!|303-456-7897|
|let||js|!-response.jsonbody[0].institutionId-!|1.0|
|let||js|!-response.jsonbody[0].address1-!|Updated address1|
|let||js|!-response.jsonbody[0].address2-!|Updated address2|
|let||js|!-response.jsonbody[0].address3-!|Updated address3|
|let||js|!-response.jsonbody[0].address4-!|Updated address4|
|let||js|!-response.jsonbody[0].city-!|HIghlands Ranch|
|let||js|!-response.jsonbody[0].state-!|AR|
|let||js|!-response.jsonbody[0].zip-!|80456|
|let||js|!-response.jsonbody[0].countryCode-!|US|
|let||js|!-response.jsonbody[0].geographicalCode-!|123456 4654654|
|let||js|!-response.jsonbody[0].mailingAddress1-!|Updated mailingAddress1|
|let||js|!-response.jsonbody[0].mailingAddress2-!|Updated mailingAddress2|
|let||js|!-response.jsonbody[0].mailingAddress3-!|Updated mailingAddress3|
|let||js|!-response.jsonbody[0].mailingAddress4-!|Updated mailingAddress4|
|let||js|!-response.jsonbody[0].mailingCity-!|Omaha|
|let||js|!-response.jsonbody[0].mailingState-!|NE|
|let||js|!-response.jsonbody[0].mailingZip-!|98754|
|let||js|!-response.jsonbody[0].mailingCountryCode-!|US|
|let||js|!-response.jsonbody[0].mailingGeographicalCode-!|4567 78978|
|let||js|!-response.jsonbody[0].name-!|testUpdatedNameCreatedByFit1|


'''5.2.2.6 name set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-
{
    "SelectionCriteriaBranch": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 2
            }
        }, 
        "name": "testUpdatedNameCreatedByFit",
        "isDeleted": 0
    }
}
-!|
|PUT|/branches/search|200|||
|let||js|!-response.jsonbody[0].branchId-!|%branchID1%|
|let||js|!-response.jsonbody[0].externalId-!|!-testUpdateExternalIdByFit2-!|
|let||js|!-response.jsonbody[0].phone-!|303-456-7897|
|let||js|!-response.jsonbody[0].institutionId-!|1.0|
|let||js|!-response.jsonbody[0].address1-!|Updated address1|
|let||js|!-response.jsonbody[0].address2-!|Updated address2|
|let||js|!-response.jsonbody[0].address3-!|Updated address3|
|let||js|!-response.jsonbody[0].address4-!|Updated address4|
|let||js|!-response.jsonbody[0].city-!|HIghlands Ranch|
|let||js|!-response.jsonbody[0].state-!|AR|
|let||js|!-response.jsonbody[0].zip-!|80456|
|let||js|!-response.jsonbody[0].countryCode-!|US|
|let||js|!-response.jsonbody[0].geographicalCode-!|123456 4654654|
|let||js|!-response.jsonbody[0].mailingAddress1-!|Updated mailingAddress1|
|let||js|!-response.jsonbody[0].mailingAddress2-!|Updated mailingAddress2|
|let||js|!-response.jsonbody[0].mailingAddress3-!|Updated mailingAddress3|
|let||js|!-response.jsonbody[0].mailingAddress4-!|Updated mailingAddress4|
|let||js|!-response.jsonbody[0].mailingCity-!|Omaha|
|let||js|!-response.jsonbody[0].mailingState-!|NE|
|let||js|!-response.jsonbody[0].mailingZip-!|98754|
|let||js|!-response.jsonbody[0].mailingCountryCode-!|US|
|let||js|!-response.jsonbody[0].mailingGeographicalCode-!|4567 78978|
|let||js|!-response.jsonbody[0].name-!|testUpdatedNameCreatedByFit1|

'''5.2.2.7 companyDescription set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-
{
    "SelectionCriteriaBranch": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 2
            }
        }, 
        "companyDescription": "default",
        "isDeleted": 0
    }
}
-!|
|PUT|/branches/search|200|||

'''5.2.2.8 companyId set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-
{
    "SelectionCriteriaBranch": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 2
            }
        }, 
        "companyId": 2,
        "isDeleted": 0
    }
}
-!|
|PUT|/branches/search|200|||
|let||js|!-response.jsonbody[0].institutionId-!|2|

'''5.2.2.9 isDeleted set to true'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-
{
    "SelectionCriteriaBranch": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 10
            }
        }, 
        "isDeleted": true
    }
}
-!|
|PUT|/branches/search|200|||
****!
****!
!*****> '''5.3 DELETE BRANCHES'''
!*****> '''5.3.1 DELETE BRANCHES (/branches//{branchId})'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody||
|DELETE|/branches/%branchID1%|204|||
|DELETE|/branches/%branchID2%|204|||
|DELETE|/branches/123|404|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Data requested by caller was not found. Type=branch.-!|true|

!|Query|!- select IS_DELETED from [BRANCH] where EXTERNAL_ID = 'testUpdateExternalIdByFit2'-!|
|IS_DELETED?|
|1|

!|Query|!- select IS_DELETED from [BRANCH] where EXTERNAL_ID = 'testExternalIdByFit2'-!|
|IS_DELETED?|
|1|


|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest|
|setHeader|!- appKey : -!${institutionNum}!-:admin 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-
{
    "SelectionCriteriaBranch": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 10
            }
        }, 
        "isDeleted": true
    }
}
-!|
|PUT|/branches/search|200|||
|let||js|!-response.jsonbody[0].externalId-!|!-testUpdateExternalIdByFit2-!|
|let||js|!-response.jsonbody[1].externalId-!|!-testExternalIdByFit2-!|
****!
****!
!*****>  Clean-up Test Data

!|Execute|!-delete [BRANCH] where EXTERNAL_ID like '%ExternalIdByFit%'-!|
!|DatabaseEnvironment|
|commit|
****!
****!