!*****> !style_green[7. FINANCIAL INSTITUTION]
!*****> '''7.1 PUT FINANCIAL INSTITUTION'''
!*****> '''7.1.1 Add An Institution (/institutions)'''
!*****> '''7.1.1.1 System User - Add An Institution'''

'''7.1.1.1.1 System User - Add An Institution (institutionId is set to not null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": 1, 
        "externalId": "FitCreatedExternalID", 
        "levelDescription": "This is just testing via Fit.", 
        "levelName": "ROOT", 
        "routingNumber": 1, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": null, 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": null, 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2013, 
                "month": 2, 
                "day": 4, 
                "displayValue": "02/04/2013"
            }
        }, 
        "checkImagesEnabled": false, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": 0, 
        "numberOfAggregationUsers": 0, 
        "name": "Test Bank", 
        "numberOfUsers": 5
    }
}-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200001 - Argument company-id is invalid.-!|true|

'''7.1.1.1.2 System User - Add An Institution (institutionId is set to null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": null, 
        "externalId": "FitCreatedExternalID", 
        "levelDescription": "This is just testing via Fit.", 
        "levelName": "ROOT-TEST", 
        "routingNumber": 2, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": "123456 123456", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": "7894 4569", 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "checkImagesEnabled": true, 
        "createDate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "lastUpdate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "numberOfConsumerUsers": 12, 
        "numberOfAggregationUsers": 256, 
        "securityQuestions": null, 
        "isDefault": false,
        "name": "Test Bank", 
        "numberOfUsers": 5000
    }
}-!|
|PUT||200|||
|let|$institutionId1|js|response.jsonbody.Institution.institutionId||
|let||js|!-response.jsonbody.Institution.externalId-!|!-FitCreatedExternalID-!|
|let||js|!-response.jsonbody.Institution.levelDescription-!|!-This is just testing via Fit.-!|
|let||js|!-response.jsonbody.Institution.levelName-!|!-ROOT-TEST-!|
|let||js|!-response.jsonbody.Institution.routingNumber-!|2|
|let||js|!-response.jsonbody.Institution.address1-!|!-9999 Street Number-1-!|
|let||js|!-response.jsonbody.Institution.address2-!|!-9999 Street Number-2-!|
|let||js|!-response.jsonbody.Institution.address3-!|!-9999 Street Number-3-!|
|let||js|!-response.jsonbody.Institution.address4-!|!-9999 Street Number-4-!|
|let||js|!-response.jsonbody.Institution.city-!|Denver|
|let||js|!-response.jsonbody.Institution.state-!|CO|
|let||js|!-response.jsonbody.Institution.zip-!|80247|
|let||js|!-response.jsonbody.Institution.countryCode-!|US|
|let||js|!-response.jsonbody.Institution.geographicalCode-!|123456 123456|
|let||js|!-response.jsonbody.Institution.mailingAddress1-!|!-9999 Street Number-5-!|
|let||js|!-response.jsonbody.Institution.mailingAddress2-!|!-9999 Street Number-6-!|
|let||js|!-response.jsonbody.Institution.mailingAddress3-!|!-9999 Street Number-7-!|
|let||js|!-response.jsonbody.Institution.mailingAddress4-!|!-9999 Street Number-8-!|
|let||js|!-response.jsonbody.Institution.mailingCity-!|!-Highlands Ranch-!|
|let||js|!-response.jsonbody.Institution.mailingState-!|CO|
|let||js|!-response.jsonbody.Institution.mailingZip-!|80247|
|let||js|!-response.jsonbody.Institution.mailingCountryCode-!|US|
|let||js|!-response.jsonbody.Institution.mailingGeographicalCode-!|7894 4569|
|let||js|!-response.jsonbody.Institution.phone-!|303-456-7878|
|let||js|!-response.jsonbody.Institution.supportEmail-!|!-supportemail@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.generalEmail-!|!-general@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.websiteURL-!|!-www.lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.noReplyEmail-!|!-noreplyEmail@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.onDemandLoad-!|90|
|let||js|!-response.jsonbody.Institution.contractDate.Date.year-!|2012|
|let||js|!-response.jsonbody.Institution.contractDate.Date.month-!|2|
|let||js|!-response.jsonbody.Institution.contractDate.Date.day-!|15|
|let||js|!-response.jsonbody.Institution.contractDate.Date.displayValue-!|02/15/2012|
|let||js|!-response.jsonbody.Institution.createDate.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.Institution.createDate.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.Institution.createDate.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.Institution.createDate.Date.displayValue-!||
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.displayValue-!||
|let||js|!-response.jsonbody.Institution.numberOfConsumerUsers-!||
|let||js|!-response.jsonbody.Institution.numberOfAggregationUsers-!||
|let||js|!-response.jsonbody.Institution.securityQuestions-!|null|
|let||js|!-response.jsonbody.Institution.isDefault-!||
|let||js|!-response.jsonbody.Institution.name-!|Test Bank|
|let||js|!-response.jsonbody.Institution.numberOfUsers-!||

'''7.1.1.1.3 System User - Add An Institution (same externalId value)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": null, 
        "externalId": "FitCreatedExternalID", 
        "levelDescription": "This is just testing via Fit.", 
        "levelName": "ROOT-TEST", 
        "routingNumber": 2, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": "123456 123456", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": "7894 4569", 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "checkImagesEnabled": false, 
        "createDate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "lastUpdate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "numberOfConsumerUsers": 12, 
        "numberOfAggregationUsers": 256, 
        "securityQuestions": null, 
        "isDefault": false,
        "name": "Test Bank", 
        "numberOfUsers": 5000
    }
}-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 30047 - external.id.already.in.use-!|true|

'''7.1.1.1.4 System User - Add An Institution (externalId set to null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": null, 
        "levelDescription": "This is just testing via Fit.", 
        "levelName": "ROOT-TEST", 
        "routingNumber": 2, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": "123456 123456", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": "7894 4569", 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "checkImagesEnabled": false, 
        "createDate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "lastUpdate": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 15, 
                "displayValue": "02/15/2012"
            }
        }, 
        "numberOfConsumerUsers": 12, 
        "numberOfAggregationUsers": 256, 
        "securityQuestions": null, 
        "isDefault": false,
        "name": "Test Bank", 
        "numberOfUsers": 5000
    }
}-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument company-externalId is undefined but is required.-!|true|

'''7.1.1.1.5 System User - Add An Institution (optional fields set to null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": "FitCreatedExternalID2", 
        "levelDescription": null, 
        "levelName": null, 
        "routingNumber": null, 
        "address1": "9999 Street Number-1", 
        "address2": null, 
        "address3": null, 
        "address4": null, 
        "city": "Denver", 
        "state": "CO", 
        "zip": null, 
        "countryCode": null, 
        "geographicalCode": null, 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": null, 
        "mailingAddress3": null, 
        "mailingAddress4": null, 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": null, 
        "mailingCountryCode": null, 
        "mailingGeographicalCode": null, 
        "phone": null, 
        "supportEmail": null, 
        "generalEmail": null, 
        "websiteURL": null, 
        "noReplyEmail": null, 
        "onDemandLoad": null, 
        "contractDate":null, 
        "checkImagesEnabled": false, 
        "createDate":null,
        "lastUpdate":null,
        "numberOfConsumerUsers": null, 
        "numberOfAggregationUsers": null, 
        "securityQuestions": null, 
        "isDefault": true, 
        "name": "Test Bank", 
        "numberOfUsers": null
    }
}-!|
|PUT||200|||
|let|$institutionId2|js|response.jsonbody.Institution.institutionId||
|let||js|!-response.jsonbody.Institution.externalId-!|!-FitCreatedExternalID2-!|
|let||js|!-response.jsonbody.Institution.levelDescription-!|null|
|let||js|!-response.jsonbody.Institution.levelName-!|!-Root-!|
|let||js|!-response.jsonbody.Institution.routingNumber-!|null|
|let||js|!-response.jsonbody.Institution.address1-!|9999 Street Number-1|
|let||js|!-response.jsonbody.Institution.address2-!|null|
|let||js|!-response.jsonbody.Institution.address3-!|null|
|let||js|!-response.jsonbody.Institution.address4-!|null|
|let||js|!-response.jsonbody.Institution.city-!|Denver|
|let||js|!-response.jsonbody.Institution.state-!|CO|
|let||js|!-response.jsonbody.Institution.zip-!|null|
|let||js|!-response.jsonbody.Institution.countryCode-!|US|
|let||js|!-response.jsonbody.Institution.geographicalCode-!|null|
|let||js|!-response.jsonbody.Institution.mailingAddress1-!|!-9999 Street Number-5-!|
|let||js|!-response.jsonbody.Institution.mailingAddress2-!|null|
|let||js|!-response.jsonbody.Institution.mailingAddress3-!|null|
|let||js|!-response.jsonbody.Institution.mailingAddress4-!|null|
|let||js|!-response.jsonbody.Institution.mailingCity-!|!-Highlands Ranch-!|
|let||js|!-response.jsonbody.Institution.mailingState-!|CO|
|let||js|!-response.jsonbody.Institution.mailingZip-!|null|
|let||js|!-response.jsonbody.Institution.mailingCountryCode-!|US|
|let||js|!-response.jsonbody.Institution.mailingGeographicalCode-!|null|
|let||js|!-response.jsonbody.Institution.phone-!|null|
|let||js|!-response.jsonbody.Institution.supportEmail-!|null|
|let||js|!-response.jsonbody.Institution.generalEmail-!|null|
|let||js|!-response.jsonbody.Institution.websiteURL-!|null|
|let||js|!-response.jsonbody.Institution.noReplyEmail-!|null|
|let||js|!-response.jsonbody.Institution.onDemandLoad-!|0.0|
|let||js|!-response.jsonbody.Institution.contractDate-!|null|
|let||js|!-response.jsonbody.Institution.createDate.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.Institution.createDate.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.Institution.createDate.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.Institution.createDate.Date.displayValue-!||
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.displayValue-!||
|let||js|!-response.jsonbody.Institution.numberOfConsumerUsers-!||
|let||js|!-response.jsonbody.Institution.numberOfAggregationUsers-!||
|let||js|!-response.jsonbody.Institution.securityQuestions-!|null|
|let||js|!-response.jsonbody.Institution.isDefault-!||
|let||js|!-response.jsonbody.Institution.name-!|Test Bank|
|let||js|!-response.jsonbody.Institution.numberOfUsers-!||

'''7.1.1.1.6 System User - Add An Institution (name set to null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": "FitCreatedExternalID3", 
        "address1": "9999 Street Number-1", 
        "city": "Denver", 
        "state": "CO", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "checkImagesEnabled": false, 
        "isDefault": false, 
        "name": null
    }
}
-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument company-business-name is undefined but is required-!|true|

'''7.1.1.1.7 System User - Add An Institution (address1 set to null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": "FitCreatedExternalID3", 
        "address1": null, 
        "city": "Denver", 
        "state": "CO", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "checkImagesEnabled": false, 
        "isDefault": false, 
        "name": "Test Bank"
    }
}
-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument company-business-physicalAddress-address1 is undefined but is required.-!|true|

'''7.1.1.1.8 System User - Add An Institution (city set to null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": "FitCreatedExternalIDD11", 
        "address1": "9999 Street Number-1", 
        "city": null, 
        "state": "CO", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "checkImagesEnabled": false, 
        "isDefault": false, 
        "name": "Test Bank"
    }
}
-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument company-business-physicalAddress-city is undefined but is required.-!|true|

'''7.1.1.1.9 System User - Add An Institution (state set to null)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": "FitCreatedExternalID12", 
        "address1": "9999 Street Number-1", 
        "city": "Denver", 
        "state": null, 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "checkImagesEnabled": false, 
        "isDefault": false, 
        "name": "Test Bank"
    }
}
-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument company-business-physicalAddress-state is undefined but is required-!|true|

'''7.1.1.1.10 System User - Add An Institution (mailingAddress removed)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": "FitCreatedExternalID3-3", 
        "address1": "9999 Street Number-1", 
        "city": "Denver", 
        "state": "CO", 
        "checkImagesEnabled": false, 
        "isDefault": false, 
        "name": "Test Bank"
    }
}-!|
|PUT||200|||
|let|$institutionId3|js|response.jsonbody.Institution.institutionId||
****!
!*****> '''7.1.1.2 Consumer User - Add An Institution'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|comment|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": 1, 
        "externalId": "FitCreatedExternalID", 
        "levelDescription": "This is just testing via Fit.", 
        "levelName": "ROOT", 
        "routingNumber": 1, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": null, 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": null, 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": null, 
        "checkImagesEnabled": false, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": 0, 
        "numberOfAggregationUsers": 0, 
        "name": "Test Bank", 
        "numberOfUsers": 5
    }
}-!|
|PUT||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|

****!
!*****> '''7.1.1.3 Insight User - Add An Institution'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|setBody|!-{
    "Institution": {
        "externalId": "FitCreatedExternalIDD3", 
        "address1": "9999 Street Number-1", 
        "city": "Denver", 
        "state": "CO", 
        "mailingAddress1": "blah", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "ca", 
        "checkImagesEnabled": false, 
        "isDefault": true, 
        "name": "Test Bank"
    }
}-!|
|PUT||403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.1.2 Add an Content Item (/institutions//{institutionId}/contentitem)'''

!*****> '''7.1.2.1 System User - Add an Content Item'''

'''7.1.2.1.1 System User - Add an Content Item (all fields are null)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": null, 
        "name": null, 
        "description": null, 
        "language": null, 
        "type": null, 
        "enabled": false, 
        "format": null, 
        "template": null, 
        "mockJSON": null, 
        "dateCreated": null, 
        "lastUpdate": null, 
        "defaultContent": false, 
        "activeDate": null, 
        "endDate": null, 
        "id": null
    }
}-!|
|PUT|/1/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-startActive is undefined but is required.-!|true|

'''7.1.2.1.2 System User - Add an Content Item (all fields are with values)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|200|||
|let||js|!-response.jsonbody.ContentItem.institutionId-!|%institutionId1%|
|let||js|!-response.jsonbody.ContentItem.name-!|null|
|let||js|!-response.jsonbody.ContentItem.description-!|This is created by fit test.|
|let||js|!-response.jsonbody.ContentItem.language-!|en|
|let||js|!-response.jsonbody.ContentItem.type-!|tos|
|let||js|!-response.jsonbody.ContentItem.enabled-!|true|
|let||js|!-response.jsonbody.ContentItem.format-!|html|
|let||js|!-response.jsonbody.ContentItem.template-!|!-<html> This is just fit test</html>-!|
|let||js|!-response.jsonbody.ContentItem.mockJSON-!|null|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody.ContentItem.lastUpdate-!|null|
|let||js|!-response.jsonbody.ContentItem.defaultContent-!|false|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.year-!|2013|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.day-!|3|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.displayValue-!|01/03/2013|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.year-!|2022|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.day-!|3|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.displayValue-!|01/03/2022|
|let|$contentItemID1|js|!-response.jsonbody.ContentItem.id-!||

'''7.1.2.1.3 System User - Add an Content Item (language is incorrect format)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "description": "", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-contentDescription is undefined but is required.-!|true|

'''7.1.2.1.4 System User - Add an Content Item (activeDate null)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "description": "", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
       "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": null,
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate":null,
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-startActive is undefined but is required.-!|true|

'''7.1.2.1.5 System User - Add an Content Item (if contentItemID provided)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
       "template": "-!<html> This is just fit test</html>!-",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": -!%contentItemID1%!-
    }
}-!|
|PUT|/%institutionId1%/contentitem/|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200001 - Argument storedContent-id is invalid.-!|true|


'''7.1.2.1.6 System User - Add an Content Item (non-existing institutionID)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "description": "", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": null,
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/123/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-contentDescription is undefined but is required.-!|true|

'''7.1.2.1.7 System User - Add an Content Item (template is non-html)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "description": "", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "This is just fit test", 
        "mockJSON": null, 
        "dateCreated": null,
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200401 - Terms of Service for html type must have html content.-!|true|

'''7.1.2.1.7 System User - alert'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "ALERT", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|200|||
|let|$contentItemID2|js|!-response.jsonbody.ContentItem.id-!||

'''7.1.2.1.2 System User - disclaimer'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "DISCLAIMER", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|200|||
|let|$contentItemID4|js|!-response.jsonbody.ContentItem.id-!||

****!
!*****> '''7.1.2.2 Consumer User - Add an Content Item'''

'''7.1.2.2.1 Consumer User - Add an Content Item (all fields are with values)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUser2Token%-!|
|comment|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUser2Token%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|
****!
!*****> '''7.1.2.3 Insight User - Add an Content Item'''

'''7.1.2.3.1 Insight User - Add an Content Item (ALERT)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "alert", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|

****!
****!
!*****> '''7.1.3 Add Default Content Item (/institutions//default/contentitem/)'''
!*****> '''7.1.3.1 System User'''

'''7.1.3.1.1 System User - Add an Content Item (all fields are null)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": null, 
        "name": null, 
        "description": null, 
        "language": null, 
        "type": null, 
        "enabled": false, 
        "format": null, 
        "template": null, 
        "mockJSON": null, 
        "dateCreated": null, 
        "lastUpdate": null, 
        "defaultContent": false, 
        "activeDate": null, 
        "endDate": null, 
        "id": null
    }
}-!|
|PUT|/default/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-startActive is undefined but is required.-!|true|

'''7.1.3.1.2 Add Default Content Item (all fields are with values)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
       "template": "-!<html> This is just fit test</html!->",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/default/contentitem/|200|||
|let||js|!-response.jsonbody.ContentItem.institutionId-!|null|
|let||js|!-response.jsonbody.ContentItem.name-!|null|
|let||js|!-response.jsonbody.ContentItem.description-!|This is created by fit test.|
|let||js|!-response.jsonbody.ContentItem.language-!|en|
|let||js|!-response.jsonbody.ContentItem.type-!|tos|
|let||js|!-response.jsonbody.ContentItem.enabled-!|true|
|let||js|!-response.jsonbody.ContentItem.format-!|html|
|let||js|!-response.jsonbody.ContentItem.template-!|!-<html> This is just fit test</html>-!|
|let||js|!-response.jsonbody.ContentItem.mockJSON-!|null|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody.ContentItem.lastUpdate-!|null|
|let||js|!-response.jsonbody.ContentItem.defaultContent-!|false|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.year-!|2013|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.day-!|3|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.displayValue-!|01/03/2013|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.year-!|2022|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.day-!|3|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.displayValue-!|01/03/2022|
|let|$contentItemID3|js|!-response.jsonbody.ContentItem.id-!||

'''7.1.3.1.3 System User - Add an Content Item (language is incorrect format)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "description": "", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/default/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-contentDescription is undefined but is required.-!|true|

'''7.1.3.1.4 System User - Add an Content Item (activeDate null)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "description": "", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
       "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": null,
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate":null,
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/default/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-startActive is undefined-!|true|

'''7.1.3.1.5 System User - Add an Content Item (if contentItemID provided)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
       "template": "-!<html> This is just fit test</html>!-",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": -!%contentItemID1%!-
    }
}-!|
|PUT|/default/contentitem/|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200001 - Argument storedContent-id is invalid.-!|true|

'''7.1.3.1.6 System User - Add an Content Item (template is non-html)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "description": "", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "This is just fit test", 
        "mockJSON": null, 
        "dateCreated": null,
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/%institutionId1%/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200401 - Terms of Service for html type must have html content.-!|true|
****!
!*****> '''7.1.3.2 Consumer User'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/default/contentitem/|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|

****!
!*****> '''7.1.3.3 Insight User'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "disclaimer", 
        "enabled": true, 
        "format": "html", 
        "template": "-!<html> This is just fit test</html>!-", 
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|PUT|/default/contentitem/|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.1.4 Institution Search (/institutions//search)'''
!*****> '''7.1.4.1 System User'''

'''7.1.4.1.1 all fields set to null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": null,
        "sortOrder": null,
        "companyDescription": null,
        "businessName": null,
        "externalId": null,
        "companyId": null
    }
}-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].institutionId-!||
|let||js|!-response.jsonbody[1].institutionId-!||
|let||js|!-response.jsonbody[2].institutionId-!||
|let||js|!-response.jsonbody[3].institutionId-!||
|let||js|!-response.jsonbody[4].institutionId-!||

'''7.1.4.1.2 pageRange set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 2
            }
        }, 
        "sortOrder": null, 
        "companyDescription": null, 
        "businessName": null, 
        "externalId": null, 
        "companyId": null
    }
}-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].institutionId-!||
|let||js|!-response.jsonbody[1].institutionId-!||

'''7.1.4.1.3 pageRange, sortOrder (by description) set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 10
            }
        }, 
        "sortOrder": [
            {
                "SelectionCriteriaSortOrder": {
                    "orderKey": "description", 
                    "isDescend": true
                }
            }
        ], 
        "companyDescription": null, 
        "businessName": null, 
        "externalId": null, 
        "companyId": null
    }
}
-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].levelDescription-!|This is just testing via Fit.|
|let||js|!-response.jsonbody[1].levelDescription-!|DEFAULT COMPANY|
|let||js|!-response.jsonbody[2].levelDescription-!|ACME COMPANY|
|let||js|!-response.jsonbody[3].levelDescription-!|null|
|let||js|!-response.jsonbody[4].levelDescription-!|null|

'''7.1.4.1.4 pageRange, sortOrder (by externalId) set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 10
            }
        }, 
        "sortOrder": [
            {
                "SelectionCriteriaSortOrder": {
                    "orderKey": "externalId", 
                    "isDescend": false
                }
            }
        ], 
        "companyDescription": null, 
        "businessName": null, 
        "externalId": null, 
        "companyId": null
    }
}
-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].externalId-!|ACME|
|let||js|!-response.jsonbody[1].externalId-!|DEFAULT|
|let||js|!-response.jsonbody[2].externalId-!|FitCreatedExternalID|
|let||js|!-response.jsonbody[3].externalId-!|FitCreatedExternalID2|
|let||js|!-response.jsonbody[4].externalId-!|FitCreatedExternalID3-3|

'''7.1.4.1.5 pageRange, sortOrder (by externalId),companyDescription  set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 10
            }
        }, 
        "sortOrder": [
            {
                "SelectionCriteriaSortOrder": {
                    "orderKey": "externalId", 
                    "isDescend": true
                }
            }
        ], 
        "companyDescription": "This is just testing via Fit.", 
        "businessName": null, 
        "externalId": null, 
        "companyId": null
    }
}
-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].levelDescription-!|This is just testing via Fit.|

'''7.1.4.1.6 pageRange, sortOrder (by externalId),business Name set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 10
            }
        }, 
        "sortOrder": [
            {
                "SelectionCriteriaSortOrder": {
                    "orderKey": "externalId", 
                    "isDescend": true
                }
            }
        ], 
        "businessName": "test", 
        "externalId": null, 
        "companyId": null
    }
}
-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].name-!|Test Bank|
|let||js|!-response.jsonbody[0].externalId-!|FitCreatedExternalID3-3|
|let||js|!-response.jsonbody[1].name-!|Test Bank|
|let||js|!-response.jsonbody[1].externalId-!|FitCreatedExternalID2|
|let||js|!-response.jsonbody[2].name-!|Test Bank|
|let||js|!-response.jsonbody[2].externalId-!|FitCreatedExternalID|

'''7.1.4.1.7 pageRange, sortOrder (by externalId), externalId set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 10
            }
        }, 
        "sortOrder": [
            {
                "SelectionCriteriaSortOrder": {
                    "orderKey": "externalId", 
                    "isDescend": true
                }
            }
        ], 
        "externalId": "FitCreatedExternalID2", 
        "companyId": null
    }
}
-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].externalId-!|FitCreatedExternalID2|

'''7.1.4.1.8 pageRange, sortOrder (by description), companyId set to not null'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "SelectionCriteriaCompany": {
        "pageRange": {
            "PageRange": {
                "pageIndex": 0, 
                "pageSize": 5
            }
        }, 
        "sortOrder": [
            {
                "SelectionCriteriaSortOrder": {
                    "orderKey": "description", 
                    "isDescend": true
                }
            }
        ], 
        "companyId": "-!%institutionId1%!-"
    }
}
-!|
|PUT|/search|200|||
|let||js|!-response.jsonbody[0].institutionId-!|%institutionId1%|
|let||js|!-response.jsonbody[0].externalId-!|!-FitCreatedExternalID-!|
|let||js|!-response.jsonbody[0].levelDescription-!|This is just testing via Fit.|
|let||js|!-response.jsonbody[0].levelName-!|ROOT-TEST|
|let||js|!-response.jsonbody[0].routingNumber-!|2|
|let||js|!-response.jsonbody[0].address1-!|9999 Street Number-1|
|let||js|!-response.jsonbody[0].address2-!|9999 Street Number-2|
|let||js|!-response.jsonbody[0].address3-!|9999 Street Number-3|
|let||js|!-response.jsonbody[0].address4-!|9999 Street Number-4|
|let||js|!-response.jsonbody[0].city-!|Denver|
|let||js|!-response.jsonbody[0].state-!|CO|
|let||js|!-response.jsonbody[0].zip-!|80247|
|let||js|!-response.jsonbody[0].countryCode-!|US|
|let||js|!-response.jsonbody[0].geographicalCode-!|123456 123456|
|let||js|!-response.jsonbody[0].mailingAddress1-!|9999 Street Number-5|
|let||js|!-response.jsonbody[0].mailingAddress2-!|9999 Street Number-6|
|let||js|!-response.jsonbody[0].mailingAddress3-!|9999 Street Number-7|
|let||js|!-response.jsonbody[0].mailingAddress4-!|9999 Street Number-8|
|let||js|!-response.jsonbody[0].mailingCity-!|Highlands Ranch|
|let||js|!-response.jsonbody[0].mailingState-!|CO|
|let||js|!-response.jsonbody[0].mailingZip-!|80247|
|let||js|!-response.jsonbody[0].mailingCountryCode-!|US|
|let||js|!-response.jsonbody[0].mailingGeographicalCode-!|7894 4569|
|let||js|!-response.jsonbody[0].phone-!|303-456-7878|
|let||js|!-response.jsonbody[0].supportEmail-!|!-supportemail@lodosoftware.com-!|
|let||js|!-response.jsonbody[0].generalEmail-!|!-general@lodosoftware.com-!|
|let||js|!-response.jsonbody[0].websiteURL-!|!-www.lodosoftware.com-!|
|let||js|!-response.jsonbody[0].noReplyEmail-!|!-noreplyEmail@lodosoftware.com-!|
|let||js|!-response.jsonbody[0].onDemandLoad-!|90|
|let||js|!-response.jsonbody[0].contractDate.Date.year-!||
|let||js|!-response.jsonbody[0].contractDate.Date.month-!||
|let||js|!-response.jsonbody[0].contractDate.Date.day-!||
|let||js|!-response.jsonbody[0].contractDate.Date.displayValue-!||
|let||js|!-response.jsonbody[0].checkImagesEnabled-!|true|
|let||js|!-response.jsonbody[0].createDate.Date.year-!||
|let||js|!-response.jsonbody[0].createDate.Date.month-!||
|let||js|!-response.jsonbody[0].createDate.Date.day-!||
|let||js|!-response.jsonbody[0].createDate.Date.displayValue-!||
|let||js|!-response.jsonbody[0].lastUpdate.Date.year-!||
|let||js|!-response.jsonbody[0].lastUpdate.Date.month-!||
|let||js|!-response.jsonbody[0].lastUpdate.Date.day-!||
|let||js|!-response.jsonbody[0].lastUpdate.Date.displayValue-!||
|let||js|!-response.jsonbody[0].numberOfConsumerUsers-!|0.0|
|let||js|!-response.jsonbody[0].numberOfAggregationUsers-!|0.0|
|let||js|!-response.jsonbody[0].securityQuestions-!|null|
|let||js|!-response.jsonbody[0].isDefault-!|false|
|let||js|!-response.jsonbody[0].name-!|Test Bank|
|let||js|!-response.jsonbody[0].numberOfUsers-!|0.0|
****!
****!
****!
!*****> '''7.2 POST FINANCIAL INSTITUTION'''
!*****> '''7.2.1 POST FINANCIAL INSTITUTION (/institutions/{institutionId})'''
!*****> '''7.2.1.1 System User'''

'''7.2.1.1.1 System User (update all fields with different values)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": 1, 
        "externalId": "FitUpdatedExternalID", 
        "levelDescription": "This is just update testing via Fit.", 
        "levelName": "FITTEST", 
        "routingNumber": 2, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": "12345 23456", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": null, 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2013, 
                "month": 2, 
                "day": 10, 
                "displayValue": "02/10/2013"
            }
        }, 
        "checkImagesEnabled": false, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": 3, 
        "numberOfAggregationUsers": 411,
        "securityQuestions": null,
        "isDefault": false, 
        "name": "UTest Bank", 
        "numberOfUsers": 5
    }
}-!|
|POST|/%institutionId1%|200|||
|let||js|!-response.jsonbody.Institution.institutionId-!|%institutionId1%|
|let||js|!-response.jsonbody.Institution.externalId-!|FitUpdatedExternalID|
|let||js|!-response.jsonbody.Institution.levelDescription-!|This is just update testing via Fit.|
|let||js|!-response.jsonbody.Institution.levelName-!|FITTEST|
|let||js|!-response.jsonbody.Institution.routingNumber-!|2|
|let||js|!-response.jsonbody.Institution.address1-!|9999 Street Number-1|
|let||js|!-response.jsonbody.Institution.address2-!|9999 Street Number-2|
|let||js|!-response.jsonbody.Institution.address3-!|9999 Street Number-3|
|let||js|!-response.jsonbody.Institution.address4-!|9999 Street Number-4|
|let||js|!-response.jsonbody.Institution.city-!|Denver|
|let||js|!-response.jsonbody.Institution.state-!|CO|
|let||js|!-response.jsonbody.Institution.zip-!|80247|
|let||js|!-response.jsonbody.Institution.countryCode-!|US|
|let||js|!-response.jsonbody.Institution.geographicalCode-!|12345 23456|
|let||js|!-response.jsonbody.Institution.mailingAddress1-!|9999 Street Number-5|
|let||js|!-response.jsonbody.Institution.mailingAddress2-!|9999 Street Number-6|
|let||js|!-response.jsonbody.Institution.mailingAddress3-!|9999 Street Number-7|
|let||js|!-response.jsonbody.Institution.mailingAddress4-!|9999 Street Number-8|
|let||js|!-response.jsonbody.Institution.mailingCity-!|Highlands Ranch|
|let||js|!-response.jsonbody.Institution.mailingState-!|CO|
|let||js|!-response.jsonbody.Institution.mailingZip-!|80247|
|let||js|!-response.jsonbody.Institution.mailingCountryCode-!|US|
|let||js|!-response.jsonbody.Institution.mailingGeographicalCode-!|null|
|let||js|!-response.jsonbody.Institution.phone-!|303-456-7878|
|let||js|!-response.jsonbody.Institution.supportEmail-!|!-supportemail@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.generalEmail-!|!-general@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.websiteURL-!|!-www.lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.noReplyEmail-!|!-noreplyEmail@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.onDemandLoad-!|90|
|let||js|!-response.jsonbody.Institution.contractDate.Date.year-!|2013|
|let||js|!-response.jsonbody.Institution.contractDate.Date.month-!|2|
|let||js|!-response.jsonbody.Institution.contractDate.Date.day-!|10|
|let||js|!-response.jsonbody.Institution.contractDate.Date.displayValue-!|02/10/2013|
|let||js|!-response.jsonbody.Institution.checkImagesEnabled-!|false|
|let||js|!-response.jsonbody.Institution.createDate-!||
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.displayValue-!||
|let||js|!-response.jsonbody.Institution.numberOfConsumerUsers-!||
|let||js|!-response.jsonbody.Institution.numberOfAggregationUsers-!||
|let||js|!-response.jsonbody.Institution.securityQuestions-!||
|let||js|!-response.jsonbody.Institution.isDefault-!||
|let||js|!-response.jsonbody.Institution.name-!|UTest Bank|
|let||js|!-response.jsonbody.Institution.numberOfUsers-!||

'''7.2.1.1.2 System User (update all fields with same values)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": 1, 
        "externalId": "FitUpdatedExternalID", 
        "levelDescription": "This is just update testing via Fit.", 
        "levelName": "FITTEST", 
        "routingNumber": 2, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": "12345 23456", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": null, 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2013, 
                "month": 2, 
                "day": 10, 
                "displayValue": "02/10/2013"
            }
        }, 
        "checkImagesEnabled": false, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": 3, 
        "numberOfAggregationUsers": 411,
        "securityQuestions": null,
        "isDefault": false, 
        "name": "UTest Bank", 
        "numberOfUsers": 5
    }
}-!|
|POST|/%institutionId1%|200|||
|let||js|!-response.jsonbody.Institution.institutionId-!|%institutionId1%|
|let||js|!-response.jsonbody.Institution.externalId-!|FitUpdatedExternalID|
|let||js|!-response.jsonbody.Institution.levelDescription-!|This is just update testing via Fit.|
|let||js|!-response.jsonbody.Institution.levelName-!|FITTEST|
|let||js|!-response.jsonbody.Institution.routingNumber-!|2|
|let||js|!-response.jsonbody.Institution.address1-!|9999 Street Number-1|
|let||js|!-response.jsonbody.Institution.address2-!|9999 Street Number-2|
|let||js|!-response.jsonbody.Institution.address3-!|9999 Street Number-3|
|let||js|!-response.jsonbody.Institution.address4-!|9999 Street Number-4|
|let||js|!-response.jsonbody.Institution.city-!|Denver|
|let||js|!-response.jsonbody.Institution.state-!|CO|
|let||js|!-response.jsonbody.Institution.zip-!|80247|
|let||js|!-response.jsonbody.Institution.countryCode-!|US|
|let||js|!-response.jsonbody.Institution.geographicalCode-!|12345 23456|
|let||js|!-response.jsonbody.Institution.mailingAddress1-!|9999 Street Number-5|
|let||js|!-response.jsonbody.Institution.mailingAddress2-!|9999 Street Number-6|
|let||js|!-response.jsonbody.Institution.mailingAddress3-!|9999 Street Number-7|
|let||js|!-response.jsonbody.Institution.mailingAddress4-!|9999 Street Number-8|
|let||js|!-response.jsonbody.Institution.mailingCity-!|Highlands Ranch|
|let||js|!-response.jsonbody.Institution.mailingState-!|CO|
|let||js|!-response.jsonbody.Institution.mailingZip-!|80247|
|let||js|!-response.jsonbody.Institution.mailingCountryCode-!|US|
|let||js|!-response.jsonbody.Institution.mailingGeographicalCode-!|null|
|let||js|!-response.jsonbody.Institution.phone-!|303-456-7878|
|let||js|!-response.jsonbody.Institution.supportEmail-!|!-supportemail@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.generalEmail-!|!-general@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.websiteURL-!|!-www.lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.noReplyEmail-!|!-noreplyEmail@lodosoftware.com-!|
|let||js|!-response.jsonbody.Institution.onDemandLoad-!|90|
|let||js|!-response.jsonbody.Institution.contractDate.Date.year-!|2013|
|let||js|!-response.jsonbody.Institution.contractDate.Date.month-!|2|
|let||js|!-response.jsonbody.Institution.contractDate.Date.day-!|10|
|let||js|!-response.jsonbody.Institution.contractDate.Date.displayValue-!|02/10/2013|
|let||js|!-response.jsonbody.Institution.checkImagesEnabled-!|false|
|let||js|!-response.jsonbody.Institution.createDate-!||
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.Institution.lastUpdate.Date.displayValue-!||
|let||js|!-response.jsonbody.Institution.numberOfConsumerUsers-!||
|let||js|!-response.jsonbody.Institution.numberOfAggregationUsers-!||
|let||js|!-response.jsonbody.Institution.securityQuestions-!||
|let||js|!-response.jsonbody.Institution.isDefault-!||
|let||js|!-response.jsonbody.Institution.name-!|UTest Bank|
|let||js|!-response.jsonbody.Institution.numberOfUsers-!||

'''7.2.1.1.3 System User (incorrect institutionID)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": 4, 
        "externalId": "FitUpdatedExternalID", 
        "levelDescription": "This is just update testing via Fit.", 
        "levelName": "FITTEST", 
        "routingNumber": 1, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": "12345 23456", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": null, 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2013, 
                "month": 2, 
                "day": 10, 
                "displayValue": "02/10/2013"
            }
        }, 
        "checkImagesEnabled": false, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": 3, 
        "numberOfAggregationUsers": 411,
        "securityQuestions": null,
        "isDefault": false, 
        "name": "UTest Bank", 
        "numberOfUsers": 5
    }
}-!|
|POST|/4|400|||
|let|$errMsg|js|!-response.jsonbody.message-!|||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200003 - Argument company has an id which does not resolve to an existing entity.-!|true|

'''7.2.1.1.4 System User (all fields are null except name)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId":12345678, 
        "externalId": null, 
        "levelDescription": null, 
        "levelName": null, 
        "routingNumber": null, 
        "address1": null, 
        "address2": null, 
        "address3": null, 
        "address4": null, 
        "city": null, 
        "state": null, 
        "zip": null, 
        "countryCode": null, 
        "geographicalCode": null, 
        "mailingAddress1": null, 
        "mailingAddress2": null, 
        "mailingAddress3": null, 
        "mailingAddress4": null, 
        "mailingCity": null, 
        "mailingState": null, 
        "mailingZip": null, 
        "mailingCountryCode": null, 
        "mailingGeographicalCode": null, 
        "phone": null, 
        "supportEmail": null, 
        "generalEmail": null, 
        "websiteURL": null, 
        "noReplyEmail": null, 
        "onDemandLoad": null, 
        "contractDate": null,
        "checkImagesEnabled": null, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": null, 
        "numberOfAggregationUsers": null, 
        "securityQuestions": null, 
        "isDefault": null, 
        "name": "UTest Bank", 
        "numberOfUsers": null
    }
}
-!|
|POST|/%institutionId1%|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|ErrorCode: 200002 - Argument company-externalId is undefined but is required.|true|

'''7.2.1.1.5 System User (name is empty value)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId":1, 
        "externalId": null, 
        "levelDescription": null, 
        "levelName": null, 
        "routingNumber": null, 
        "address1": null, 
        "address2": null, 
        "address3": null, 
        "address4": null, 
        "city": null, 
        "state": null, 
        "zip": null, 
        "countryCode": null, 
        "geographicalCode": null, 
        "mailingAddress1": null, 
        "mailingAddress2": null, 
        "mailingAddress3": null, 
        "mailingAddress4": null, 
        "mailingCity": null, 
        "mailingState": null, 
        "mailingZip": null, 
        "mailingCountryCode": null, 
        "mailingGeographicalCode": null, 
        "phone": null, 
        "supportEmail": null, 
        "generalEmail": null, 
        "websiteURL": null, 
        "noReplyEmail": null, 
        "onDemandLoad": null, 
        "contractDate": null,
        "checkImagesEnabled": null, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": null, 
        "numberOfAggregationUsers": null, 
        "securityQuestions": null, 
        "isDefault": null, 
        "name": "", 
        "numberOfUsers": null
    }
}
-!|
|POST|/%institutionId1%|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument company-business-name is undefined but is required.-!|true|

'''7.2.1.1.6 System User (name is null)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId":1, 
        "externalId": null, 
        "levelDescription": null, 
        "levelName": null, 
        "routingNumber": null, 
        "address1": null, 
        "address2": null, 
        "address3": null, 
        "address4": null, 
        "city": null, 
        "state": null, 
        "zip": null, 
        "countryCode": null, 
        "geographicalCode": null, 
        "mailingAddress1": null, 
        "mailingAddress2": null, 
        "mailingAddress3": null, 
        "mailingAddress4": null, 
        "mailingCity": null, 
        "mailingState": null, 
        "mailingZip": null, 
        "mailingCountryCode": null, 
        "mailingGeographicalCode": null, 
        "phone": null, 
        "supportEmail": null, 
        "generalEmail": null, 
        "websiteURL": null, 
        "noReplyEmail": null, 
        "onDemandLoad": null, 
        "contractDate": null,
        "checkImagesEnabled": null, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": null, 
        "numberOfAggregationUsers": null, 
        "securityQuestions": null, 
        "isDefault": null, 
        "name": null, 
        "numberOfUsers": null
    }
}
-!|
|POST|/%institutionId1%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument company-business-name is undefined but is required-!|true|


****!
!*****> '''7.2.1.2 Consumer User'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUser2Token%-!|
|setBody|!-{
    "Institution": {
        "institutionId":1, 
        "externalId": null, 
        "levelDescription": null, 
        "levelName": null, 
        "routingNumber": null, 
        "address1": null, 
        "address2": null, 
        "address3": null, 
        "address4": null, 
        "city": null, 
        "state": null, 
        "zip": null, 
        "countryCode": null, 
        "geographicalCode": null, 
        "mailingAddress1": null, 
        "mailingAddress2": null, 
        "mailingAddress3": null, 
        "mailingAddress4": null, 
        "mailingCity": null, 
        "mailingState": null, 
        "mailingZip": null, 
        "mailingCountryCode": null, 
        "mailingGeographicalCode": null, 
        "phone": null, 
        "supportEmail": null, 
        "generalEmail": null, 
        "websiteURL": null, 
        "noReplyEmail": null, 
        "onDemandLoad": null, 
        "contractDate": null,
        "checkImagesEnabled": null, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": null, 
        "numberOfAggregationUsers": null, 
        "securityQuestions": null, 
        "isDefault": null, 
        "name": "UTest Bank", 
        "numberOfUsers": null
    }
}
-!|
|POST|/%institutionId1%|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|
****!
!*****> '''7.2.1.3 Insight User'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|setBody|!-{
    "Institution": {
        "institutionId": 1, 
        "externalId": "FitUpdatedExternalID", 
        "levelDescription": "This is just update testing via Fit.", 
        "levelName": "FITTEST", 
        "routingNumber": 2, 
        "address1": "9999 Street Number-1", 
        "address2": "9999 Street Number-2", 
        "address3": "9999 Street Number-3", 
        "address4": "9999 Street Number-4", 
        "city": "Denver", 
        "state": "CO", 
        "zip": "80247", 
        "countryCode": "US", 
        "geographicalCode": "12345 23456", 
        "mailingAddress1": "9999 Street Number-5", 
        "mailingAddress2": "9999 Street Number-6", 
        "mailingAddress3": "9999 Street Number-7", 
        "mailingAddress4": "9999 Street Number-8", 
        "mailingCity": "Highlands Ranch", 
        "mailingState": "CO", 
        "mailingZip": "80247", 
        "mailingCountryCode": "US", 
        "mailingGeographicalCode": null, 
        "phone": "303-456-7878", 
        "supportEmail": "supportemail@lodosoftware.com", 
        "generalEmail": "general@lodosoftware.com", 
        "websiteURL": "www.lodosoftware.com", 
        "noReplyEmail": "noreplyEmail@lodosoftware.com", 
        "onDemandLoad": 90, 
        "contractDate": {
            "Date": {
                "year": 2013, 
                "month": 2, 
                "day": 10, 
                "displayValue": "02/10/2013"
            }
        }, 
        "checkImagesEnabled": false, 
        "createDate": null, 
        "lastUpdate": null, 
        "numberOfConsumerUsers": 3, 
        "numberOfAggregationUsers": 411,
        "securityQuestions": null,
        "isDefault": false, 
        "name": "UTest Bank", 
        "numberOfUsers": 5
    }
}-!|
|POST|/%institutionId1%|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.2.2 POST FINANCIAL INSTITUTION (/institutions/{institutionId}/contentitems/{contentitemId})'''
!*****> '''7.2.2.1 System User'''

'''7.2.2.1.1 System User (create a content item)''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "institutionId": 1, 
        "name": "fitCreatedContentItem", 
        "description": "This is created by fit test.", 
        "language": "EN", 
        "type": "TOS", 
        "enabled": true, 
        "format": "html", 
       "template": "-!<html> This is just fit test</html>!-",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": true, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2022"
            }
        }, 
        "id": null
    }
}-!|
|POST|/%institutionId1%/contentitems/%contentItemID1%|200|||
|let||js|!-response.jsonbody.ContentItem.institutionId-!|%institutionId1%|
|let||js|!-response.jsonbody.ContentItem.name-!|null|
|let||js|!-response.jsonbody.ContentItem.description-!|This is created by fit test.|
|let||js|!-response.jsonbody.ContentItem.language-!|en|
|let||js|!-response.jsonbody.ContentItem.type-!|tos|
|let||js|!-response.jsonbody.ContentItem.enabled-!|true|
|let||js|!-response.jsonbody.ContentItem.format-!|html|
|let||js|!-response.jsonbody.ContentItem.template-!|!-<html> This is just fit test</html>-!|
|let||js|!-response.jsonbody.ContentItem.mockJSON-!|null|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody.ContentItem.lastUpdate-!|null|
|let||js|!-response.jsonbody.ContentItem.defaultContent-!|false|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.year-!|2013|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.day-!|3|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.displayValue-!|01/03/2013|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.year-!|2022|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.day-!|3|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.displayValue-!|01/03/2022|
|let||js|!-response.jsonbody.ContentItem.id-!|%contentItemID1%|

'''7.2.2.1.2 System User (update with different values)''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "name": "UpdatedContentItem", 
        "description": "This is update by fit test.", 
        "language": null, 
        "type": "DISCLAIMER", 
        "enabled": false, 
        "format": "email", 
       "template": "-!<html> This is update test by fit.</html>!-",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 3, 
                "displayValue": "02/04/2012"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate": {
            "Date": {
                "year": 2014, 
                "month": 12, 
                "day": 3, 
                "displayValue": "12/03/2014"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 23, 
                "displayValue": "01/23/2022"
            }
        },
        "id": -!%contentItemID1%!-
    }
}-!|
|POST|/%institutionId1%/contentitems/%contentItemID1%|200|||
|let||js|!-response.jsonbody.ContentItem.institutionId-!|%institutionId1%|
|let||js|!-response.jsonbody.ContentItem.name-!|null|
|let||js|!-response.jsonbody.ContentItem.description-!|This is update by fit test.|
|let||js|!-response.jsonbody.ContentItem.language-!|null|
|let||js|!-response.jsonbody.ContentItem.type-!|disclaimer|
|let||js|!-response.jsonbody.ContentItem.enabled-!||
|let||js|!-response.jsonbody.ContentItem.format-!||
|let||js|!-response.jsonbody.ContentItem.template-!|!-<html> This is update test by fit.</html>-!|
|let||js|!-response.jsonbody.ContentItem.mockJSON-!|null|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.year-!|%todayYear%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.month-!|%todayMonth1%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.day-!|%todayDay%|
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody.ContentItem.lastUpdate-!|null|
|let||js|!-response.jsonbody.ContentItem.defaultContent-!|true|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.year-!|2013|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.day-!|3|
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.displayValue-!|01/03/2013|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.year-!|2022|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.month-!|1.0|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.day-!|23|
|let||js|!-response.jsonbody.ContentItem.endDate.Date.displayValue-!|01/23/2022|
|let||js|!-response.jsonbody.ContentItem.id-!|%contentItemID1%|

'''7.2.2.1.3 System User (type is empty value)''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "name": "UpdatedContentItem", 
        "description": "This is update by fit test2..", 
        "language": null, 
        "type": "", 
        "enabled": false, 
        "format": "", 
       "template": "<html> This is update test by fit.</html>",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2012, 
                "month": 1, 
                "day": 3, 
                "displayValue": "01/03/2012"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 12, 
                "day": 3, 
                "displayValue": "12/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 23, 
                "displayValue": "01/23/2022"
            }
        }
    }
}-!|
|POST|/%institutionId1%/contentitems/%contentItemID1%|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300002 - Argument contentItem-type is undefined.-!|true|

'''7.2.2.1.4 System User (activeDate null)''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "name": null, 
        "description": "This is update by fit test3..", 
        "language": null, 
        "type": "DISCLAIMER", 
        "enabled": null, 
        "format": null, 
       "template": "-!<html> This is update test by fit.</html>!-",  
        "mockJSON": null, 
        "dateCreated":null,
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate":null,
        "id": 12,
        "endDate": null
        }
    }
}-!|
|POST|/%institutionId1%/contentitems/%contentItemID1%|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-startActive is undefined but is required.-!|true|

'''7.2.2.1.5 System User (template null)''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "name": null, 
        "description": "This is update by fit test4..", 
        "language": null, 
        "type": "DISCLAIMER", 
        "enabled": null, 
        "format": null, 
       "template": null,  
        "mockJSON": null, 
        "dateCreated":null,
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 12, 
                "day": 3, 
                "displayValue": "12/03/2013"
            }
        }, 
        "endDate": null,
        "id": 12
        }
    }
}-!|
|POST|/%institutionId1%/contentitems/%contentItemID1%|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200002 - Argument storedContent-contentType is undefined but is required.-!|true|

'''7.2.2.1.6 System User (institutionID incorrect)''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "name": null, 
        "description": "This is update by fit test5..", 
        "language": null, 
        "type": "DISCLAIMER", 
        "enabled": null, 
        "format": null, 
       "template": "-!<html> This is update test by fit.</html>!-",  
        "mockJSON": null, 
        "dateCreated":null,
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 12, 
                "day": 3, 
                "displayValue": "12/03/2013"
            }
        }, 
        "endDate": null
        }
    }
}-!|
|POST|/1231212/contentitems/%contentItemID1%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200001 - Argument storedContent-companyId is invalid. -!|true|

'''7.2.2.1.7 System User (invalid contenitemID)''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "name": null, 
        "description": "This is update by fit test6..", 
        "language": null, 
        "type": "DISCLAIMER", 
        "enabled": null, 
        "format": null, 
       "template": "-!<html> This is update test by fit.</html>!-",  
        "mockJSON": null, 
        "dateCreated":null,
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 12, 
                "day": 3, 
                "displayValue": "12/03/2013"
            }
        }, 
        "endDate": null,
        "id": 123
        }
    }
}-!|
|POST|/%institutionId1%/contentitems/123|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 200001 - Argument storedContent-id is invalid.-!|true|
****!
!*****> '''7.2.2.2 Consumer User'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUser2Token%-!|
|setBody|!-{
    "ContentItem": {
        "name": "UpdatedContentItem", 
        "description": "This is update by fit test.", 
        "language": null, 
        "type": "DISCLAIMER", 
        "enabled": false, 
        "format": "email", 
       "template": "-!<html> This is update test by fit.</html>!-",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 3, 
                "displayValue": "02/04/2012"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 12, 
                "day": 3, 
                "displayValue": "12/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 23, 
                "displayValue": "01/23/2022"
            }
        }
    }
}-!|
|POST|/%institutionId1%/contentitems/%contentItemID1%|400|||
|let|$errMsg|js|!-response.jsonbody.message-!||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|

****!
!*****> '''7.2.2.3 Insight User'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|setBody|!-{
    "ContentItem": {
        "name": "UpdatedContentItem", 
        "description": "This is update by fit test.", 
        "language": null, 
        "type": "DISCLAIMER", 
        "enabled": false, 
        "format": "email", 
       "template": "-!<html> This is update test by fit.</html>!-",  
        "mockJSON": null, 
        "dateCreated": {
            "Date": {
                "year": 2012, 
                "month": 2, 
                "day": 3, 
                "displayValue": "02/04/2012"
            }
        }, 
        "lastUpdate": null, 
        "defaultContent": null, 
        "activeDate": {
            "Date": {
                "year": 2013, 
                "month": 12, 
                "day": 3, 
                "displayValue": "12/03/2013"
            }
        }, 
        "endDate": {
            "Date": {
                "year": 2022, 
                "month": 1, 
                "day": 23, 
                "displayValue": "01/23/2022"
            }
        },
"id": -!%contentItemID1%!-
    }
}-!|
|POST|/%institutionId1%/contentitems/%contentItemID1%|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
****!
!*****> '''7.3 GET FINANCIAL INSTITUTION'''
!*****> '''7.3.1 GET FINANCIAL INSTITUTION (get a list of questions)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions/questions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET||200|||
|let||js|response.body|!-["What is your mother's maiden name?","What was your first pet's name?","What was your favorite teacher's name?","What is the city of your birth?","What was your first phone number?","What is your favorite color?","What was the make of your first car?"]-!|
****!
!*****> '''7.3.2 GET FINANCIAL INSTITUTION (/institutions/)'''

!*****> '''7.3.2.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions/)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET||200|||
|let||js|!-response.jsonbody[0].institutionId-!||
|let||js|!-response.jsonbody[0].externalId-!||
|let||js|!-response.jsonbody[0].levelDescription-!||
|let||js|!-response.jsonbody[0].levelName-!||
|let||js|!-response.jsonbody[0].routingNumber-!||
|let||js|!-response.jsonbody[0].address1-!||
|let||js|!-response.jsonbody[0].address2-!||
|let||js|!-response.jsonbody[0].address3-!||
|let||js|!-response.jsonbody[0].address4-!||
|let||js|!-response.jsonbody[0].city-!||
|let||js|!-response.jsonbody[0].state-!||
|let||js|!-response.jsonbody[0].zip-!||
|let||js|!-response.jsonbody[0].countryCode-!||
|let||js|!-response.jsonbody[0].geographicalCode-!||
|let||js|!-response.jsonbody[0].mailingAddress1-!||
|let||js|!-response.jsonbody[0].mailingAddress2-!||
|let||js|!-response.jsonbody[0].mailingAddress3-!||
|let||js|!-response.jsonbody[0].mailingAddress4-!||
|let||js|!-response.jsonbody[0].mailingCity-!||
|let||js|!-response.jsonbody[0].mailingState-!||
|let||js|!-response.jsonbody[0].mailingZip-!||
|let||js|!-response.jsonbody[0].mailingCountryCode-!||
|let||js|!-response.jsonbody[0].mailingGeographicalCode-!||
|let||js|!-response.jsonbody[0].phone-!||
|let||js|!-response.jsonbody[0].supportEmail-!||
|let||js|!-response.jsonbody[0].generalEmail-!||
|let||js|!-response.jsonbody[0].websiteURL-!||
|let||js|!-response.jsonbody[0].noReplyEmail-!||
|let||js|!-response.jsonbody[0].onDemandLoad-!||
|let||js|!-response.jsonbody[0].contractDate-!||
|let||js|!-response.jsonbody[0].checkImagesEnabled-!||
|let||js|!-response.jsonbody[0].createDate.Date.year-!||
|let||js|!-response.jsonbody[0].createDate.Date.month-!||
|let||js|!-response.jsonbody[0].createDate.Date.day-!||
|let||js|!-response.jsonbody[0].lastUpdate-!||
|let||js|!-response.jsonbody[0].numberOfConsumerUsers-!||
|let||js|!-response.jsonbody[0].numberOfAggregationUsers-!||
|let||js|!-response.jsonbody[0].securityQuestions-!||
|let||js|!-response.jsonbody[0].isDefault-!||
|let||js|!-response.jsonbody[0].name-!||
|let||js|!-response.jsonbody[0].numberOfUsers-!||

****!
!*****> '''7.3.2.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions/)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET||400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|
****!
!*****> '''7.3.2.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions/)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET||403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.3.3 GET FINANCIAL INSTITUTION (/contentitems/default)'''
!*****> '''7.3.3.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/contentitems/default)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions/contentitems/default|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET||200|||
|let||js|!-response.jsonbody[0].institutionId-!||
|let||js|!-response.jsonbody[0].name-!||
|let||js|!-response.jsonbody[0].language-!||
|let||js|!-response.jsonbody[0].type-!||
|let||js|!-response.jsonbody[0].enabled-!||
|let||js|!-response.jsonbody[0].format-!||
|let||js|!-response.jsonbody[0].template-!||
|let||js|!-response.jsonbody[0].mockJSON-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.year-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.month-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.day-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody[0].lastUpdate-!||
|let||js|!-response.jsonbody[0].defaultContent-!||
|let||js|!-response.jsonbody[0].activeDate.Date.year-!||
|let||js|!-response.jsonbody[0].activeDate.Date.month-!||
|let||js|!-response.jsonbody[0].activeDate.Date.day-!||
|let||js|!-response.jsonbody[0].activeDate.Date.displayValue-!||
|let||js|!-response.jsonbody[0].endDate-!||
|let||js|!-response.jsonbody[0].id-!||
****!
!*****> '''7.3.3.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/contentitems/default)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions/contentitems/default|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET||400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User. -!|true|
****!
!*****> '''7.3.3.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/contentitems/default)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions/contentitems/default|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET||403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.3.4 GET FINANCIAL INSTITUTION (/contentitems)'''
!*****> '''7.3.4.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/contentitems) '''

'''7.3.4.1.1 SYSTEM USER - GET FINANCIAL INSTITUTION (valid institutionID) ''' 
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems|200|||
|let||js|!-response.jsonbody[0].institutionId-!||
|let||js|!-response.jsonbody[0].name-!||
|let||js|!-response.jsonbody[0].language-!||
|let||js|!-response.jsonbody[0].type-!||
|let||js|!-response.jsonbody[0].enabled-!||
|let||js|!-response.jsonbody[0].format-!||
|let||js|!-response.jsonbody[0].template-!||
|let||js|!-response.jsonbody[0].mockJSON-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.year-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.month-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.day-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody[0].lastUpdate-!||
|let||js|!-response.jsonbody[0].defaultContent-!||
|let||js|!-response.jsonbody[0].activeDate.Date.year-!||
|let||js|!-response.jsonbody[0].activeDate.Date.month-!||
|let||js|!-response.jsonbody[0].activeDate.Date.day-!||
|let||js|!-response.jsonbody[0].activeDate.Date.displayValue-!||
|let||js|!-response.jsonbody[0].endDate-!||
|let||js|!-response.jsonbody[0].id-!||
|let||js|!-response.jsonbody[1].id-!||
|let||js|!-response.jsonbody[2].id-!||
|let||js|!-response.jsonbody[3].id-!||
|let||js|!-response.jsonbody[4].id-!||

'''7.3.4.1.1 SYSTEM USER - GET FINANCIAL INSTITUTION (invalid institutionID) ''' 
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/123/contentitems|200|||

****!
!*****> '''7.3.4.2 CONSUMER USER - GET FINANCIAL INSTITUTION (get a list of content items)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId%/contentitems|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|
****!
!*****> '''7.3.4.3.1 INSIGHT USER - GET FINANCIAL INSTITUTION (get a list of content items)'''

'''7.3.4.3.1 INSIGHT USER - GET FINANCIAL INSTITUTION (invalid institutionID)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/contentitems|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|

****!
****!
!*****> '''7.3.5 GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimers)'''
!*****> '''7.3.5.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimers) '''
'''7.3.5.1.1 SYSTEM USER - GET FINANCIAL INSTITUTION (disclaimers exists) '''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|!-/-!%institutionId1%!-/contentitems/disclaimers-!|200|||
|let||js|!-response.jsonbody[0].institutionId-!||
|let||js|!-response.jsonbody[0].name-!||
|let||js|!-response.jsonbody[0].language-!||
|let||js|!-response.jsonbody[0].type-!||
|let||js|!-response.jsonbody[0].enabled-!||
|let||js|!-response.jsonbody[0].format-!||
|let||js|!-response.jsonbody[0].template-!||
|let||js|!-response.jsonbody[0].mockJSON-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.year-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.month-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.day-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody[0].lastUpdate-!||
|let||js|!-response.jsonbody[0].defaultContent-!||
|let||js|!-response.jsonbody[0].activeDate.Date.year-!||
|let||js|!-response.jsonbody[0].activeDate.Date.month-!||
|let||js|!-response.jsonbody[0].activeDate.Date.day-!||
|let||js|!-response.jsonbody[0].activeDate.Date.displayValue-!||
|let||js|!-response.jsonbody[0].endDate-!||
|let||js|!-response.jsonbody[0].id-!|2|
|let||js|!-response.jsonbody[1].id-!||

'''7.3.5.1.2 SYSTEM USER - GET FINANCIAL INSTITUTION (invalid institutionId) '''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|!-/123/contentitems/disclaimers-!|200|||
****!
!*****> '''7.3.5.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimers)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|!-/-!%institutionId1%!-/contentitems/disclaimers-!|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User. -!|true|
****!
!*****> '''7.3.5.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimers)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|!-/-!%institutionId1%!-/contentitems/disclaimers-!|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.3.6 GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/currenttos)'''

!*****> '''7.3.6.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/currenttos) '''

 '''7.3.6.1.1 SYSTEM USER - GET FINANCIAL INSTITUTION (valid institutionId) '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems/currenttos|200|||
|let||js|!-response.jsonbody.ContentItem.institutionId-!||
|let||js|!-response.jsonbody.ContentItem.name-!||
|let||js|!-response.jsonbody.ContentItem.description-!|This is created by fit test.|
|let||js|!-response.jsonbody.ContentItem.language-!|en|
|let||js|!-response.jsonbody.ContentItem.type-!|tos|
|let||js|!-response.jsonbody.ContentItem.enabled-!|true|
|let||js|!-response.jsonbody.ContentItem.format-!||
|let||js|!-response.jsonbody.ContentItem.template-!||
|let||js|!-response.jsonbody.ContentItem.dateCreated-!||
|let||js|!-response.jsonbody.ContentItem.lastUpdate-!||
|let||js|!-response.jsonbody.ContentItem.defaultContent-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.year-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.month-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.day-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.displayValue-!||
|let||js|!-response.jsonbody.ContentItem.endDate-!||
|let||js|!-response.jsonbody.ContentItem.id-!||

 '''7.3.6.1.2 SYSTEM USER - GET FINANCIAL INSTITUTION (invalid institutionId) '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems/currenttos|200|||
****!
!*****> '''7.3.6.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/currenttos)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/currenttos|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User. -!|true|
****!
!*****> '''7.3.6.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/currenttos)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/contentitems/currenttos|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.3.7 GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/tos)'''
!*****> '''7.3.7.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/tos) '''

 '''7.3.7.1.1 SYSTEM USER - GET FINANCIAL INSTITUTION (valid institutionId) '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|comment|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems/tos|200|||
|let||js|!-response.jsonbody[0].institutionId-!||
|let||js|!-response.jsonbody[0].name-!||
|let||js|!-response.jsonbody[0].description-!||
|let||js|!-response.jsonbody[0].language-!||
|let||js|!-response.jsonbody[0].type-!||
|let||js|!-response.jsonbody[0].enabled-!||
|let||js|!-response.jsonbody[0].format-!||
|let||js|!-response.jsonbody[0].template-!||
|let||js|!-response.jsonbody[0].mockJSON-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.year-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.month-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.day-!||
|let||js|!-response.jsonbody[0].dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody[0].lastUpdate-!||
|let||js|!-response.jsonbody[0].defaultContent-!||
|let||js|!-response.jsonbody[0].activeDate.Date.year-!||
|let||js|!-response.jsonbody[0].activeDate.Date.month-!||
|let||js|!-response.jsonbody[0].activeDate.Date.day-!||
|let||js|!-response.jsonbody[0].activeDate.Date.displayValue-!||
|let||js|!-response.jsonbody[0].endDate-!||
|let||js|!-response.jsonbody[0].id-!|1|
|let||js|!-response.jsonbody[1].id-!||

 '''7.3.7.1.2 SYSTEM USER - GET FINANCIAL INSTITUTION 0invalid institutionId) '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems/tos|200|||

****!
!*****> '''7.3.7.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/tos)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/tos|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User. -!|true|
****!
!*****> '''7.3.7.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/tos)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/contentitems/tos|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
****!
!*****> '''7.3.8 GET FINANCIAL INSTITUTION (/institutions/{institutionId}/questions/{userType})'''
!*****> '''7.3.8.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions/{institutionId}/questions/{userType}) '''

'''7.3.8.1.1 System userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/questions/system|200|||
|let||js|response.jsonbody[0]|What is your mother's maiden name?|
|let||js|response.jsonbody[1]|What was your first pet's name?|
|let||js|response.jsonbody[2]|What was your favorite teacher's name?|
|let||js|response.jsonbody[3]|What is the city of your birth?|
|let||js|response.jsonbody[4]|What was your first phone number?|
|let||js|response.jsonbody[5]|What is your favorite color?|
|let||js|response.jsonbody[6]|What was the make of your first car?|

'''7.3.8.1.2 Institution userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/questions/institution|200|||
|let||js|response.jsonbody[0]|What is your mother's maiden name?|
|let||js|response.jsonbody[1]|What was your first pet's name?|
|let||js|response.jsonbody[2]|What was your favorite teacher's name?|
|let||js|response.jsonbody[3]|What is the city of your birth?|
|let||js|response.jsonbody[4]|What was your first phone number?|
|let||js|response.jsonbody[5]|What is your favorite color?|
|let||js|response.jsonbody[6]|What was the make of your first car?|

'''7.3.8.1.3 Consumer userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/questions/consumer|200|||
|let||js|response.jsonbody[0]|What is your mother's maiden name?|
|let||js|response.jsonbody[1]|What was your first pet's name?|
|let||js|response.jsonbody[2]|What was your favorite teacher's name?|
|let||js|response.jsonbody[3]|What is the city of your birth?|
|let||js|response.jsonbody[4]|What was your first phone number?|
|let||js|response.jsonbody[5]|What is your favorite color?|
|let||js|response.jsonbody[6]|What was the make of your first car?|

'''7.3.8.1.4 Insight userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/questions/insight|200|||
|let||js|response.jsonbody[0]|What is your mother's maiden name?|
|let||js|response.jsonbody[1]|What was your first pet's name?|
|let||js|response.jsonbody[2]|What was your favorite teacher's name?|
|let||js|response.jsonbody[3]|What is the city of your birth?|
|let||js|response.jsonbody[4]|What was your first phone number?|
|let||js|response.jsonbody[5]|What is your favorite color?|
|let||js|response.jsonbody[6]|What was the make of your first car?|

'''7.3.8.1.5 Invalid InstitutionID '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/123/questions/system|200|||

'''7.3.8.1.6 Invalid userType'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/questions/userType|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300003 - Argument userType is ill-formed.-!|true|
****!
!*****> '''7.3.8.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions/{institutionId}/questions/{userType})'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/questions/system|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|

****!
!*****> '''7.3.8.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions/{institutionId}/questions/{userType})'''

'''7.3.8.3.1 System userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/questions/system|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|

'''7.3.8.3.2 Institution userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/questions/system|403|||
|GET|/%institutionId1%/questions/system|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|

'''7.3.8.3.3 Consumer userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/questions/system|403|||
|GET|/%institutionId1%/questions/system|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|

'''7.3.8.3.4 Insight userType '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/questions/system|403|||
|GET|/%institutionId1%/questions/system|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|

****!
****!
!*****> '''7.3.9 GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimer/{contentKey})'''
!*****> '''7.3.9.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimer/{contentKey}) '''

'''7.3.9.1.1 disclaimer contentKey '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems/disclaimer/%contentItemID5%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300201 - Operation requires Regular User.-!|true|
****!
!*****> '''7.3.9.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimer/{contentKey})'''

'''7.3.9.2.1 disclaimer contentKey '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/disclaimer/%contentItemID1%|200|||
|let||js|!-response.jsonbody.ContentItem.institutionId-!||
|let||js|!-response.jsonbody.ContentItem.name-!||
|let||js|!-response.jsonbody.ContentItem.description-!||
|let||js|!-response.jsonbody.ContentItem.language-!||
|let||js|!-response.jsonbody.ContentItem.type-!||
|let||js|!-response.jsonbody.ContentItem.enabled-!||
|let||js|!-response.jsonbody.ContentItem.format-!||
|let||js|!-response.jsonbody.ContentItem.template-!||
|let||js|!-response.jsonbody.ContentItem.mockJSON-!||
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.year-!||
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.month-!||
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.day-!||
|let||js|!-response.jsonbody.ContentItem.dateCreated.Date.displayValue-!||
|let||js|!-response.jsonbody.ContentItem.lastUpdate-!||
|let||js|!-response.jsonbody.ContentItem.defaultContent-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.year-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.month-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.day-!||
|let||js|!-response.jsonbody.ContentItem.activeDate.Date.displayValue-!||
|let||js|!-response.jsonbody.ContentItem.endDate-!||
|let||js|!-response.jsonbody.ContentItem.id-!||

'''7.3.9.2.2 non-disclaimer contentKey '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/disclaimer/%contentItemID1%|200|||

'''7.3.9.2.3 invalid contentKey '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/disclaimer/123|200|||

'''7.3.9.2.4 invalid institutionId '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/disclaimer/%contentItemID5%|200|||
****!
!*****> '''7.3.9.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/disclaimer/{contentKey})'''

'''7.3.9.3.1 disclaimer contentKey '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/contentitems/disclaimer/%contentItemID5%|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300201 - Operation requires Regular User.-!|true|
****!
****!
!*****> '''7.3.10 GET FINANCIAL INSTITUTION (/institutions//{institutionId}/branches)'''
!*****> '''Create The Branch '''
!|Execute|!-insert into [BRANCH] ([BUSINESS_ID], [COMPANY_ID],[EXTERNAL_ID])values ((select BUSINESS_ID from [COMPANY_STRUCTURE] where id =-!@institutionId1!-), -!@institutionId1!-, 'FitCreatedExternalID') -!|

!|Query|!- select ID from [BRANCH] where [COMPANY_ID]=-!@institutionId1|
|ID?|
|>>branchID|

!|DatabaseEnvironment|
|commit|
****!
!*****> '''7.3.10.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/branches) '''

'''7.3.10.1.1 valid  institutionId'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/branches|200|||
|let||js|response.jsonbody[0].branchId|%branchID%|
|let||js|response.jsonbody[0].externalId|!-FitCreatedExternalID-!|
|let||js|response.jsonbody[0].phone|303-456-7878|
|let||js|response.jsonbody[0].institutionId|%institutionId1%|
|let||js|response.jsonbody[0].address1|9999 Street Number-1|
|let||js|response.jsonbody[0].address2|9999 Street Number-2|
|let||js|response.jsonbody[0].address3|9999 Street Number-3|
|let||js|response.jsonbody[0].address4|9999 Street Number-4|
|let||js|response.jsonbody[0].city|Denver|
|let||js|response.jsonbody[0].state|CO|
|let||js|response.jsonbody[0].zip|80247|
|let||js|response.jsonbody[0].countryCode|US|
|let||js|response.jsonbody[0].geographicalCode|12345 23456|
|let||js|response.jsonbody[0].mailingAddress1|9999 Street Number-5|
|let||js|response.jsonbody[0].mailingAddress2|9999 Street Number-6|
|let||js|response.jsonbody[0].mailingAddress3|9999 Street Number-7|
|let||js|response.jsonbody[0].mailingAddress4|9999 Street Number-8|
|let||js|response.jsonbody[0].mailingCity|Highlands Ranch|
|let||js|response.jsonbody[0].mailingState|CO|
|let||js|response.jsonbody[0].mailingZip|80247|
|let||js|response.jsonbody[0].mailingCountryCode|US|
|let||js|response.jsonbody[0].mailingGeographicalCode|null|
|let||js|response.jsonbody[0].name|UTest Bank|

'''7.3.10.1.2 invalid  institutionId'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/branches|200|||
****!
!*****> '''7.3.10.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/branches)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/branches|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|

****!
!*****> '''7.3.10.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/branches)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/branches|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
!*****> '''Delete The Branch '''
!|Execute|!-delete [BRANCH] where [COMPANY_ID]= -!@institutionId1|

!|DatabaseEnvironment|
|commit|
****!
****!
!*****> '''7.3.11 GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/alerts)'''
!*****> '''7.3.11.1 SYSTEM USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/alerts) '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems/alerts|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300201 - Operation requires Regular User.-!|true|

****!
!*****> '''7.3.11.2 CONSUMER USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/alerts)'''

'''7.3.11.2.1 valid  institutionId'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/alerts|200|||

'''7.3.11.2.2 invalid  institutionId'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/alerts|200|||

****!
!*****> '''7.3.11.3 INSIGHT USER - GET FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/alerts)'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|GET|/%institutionId1%/contentitems/alerts|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300201 - Operation requires Regular User.-!|true|
****!
****!
!*****> '''7.3.12 GET FINANCIAL INSTITUTION (/institutions/{institutionId}/contentitems/{usageType}/current)'''

!*****> '''7.3.12.1 SYSTEM USER '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|GET|/%institutionId1%/contentitems/tos/current|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Operation requires Regular User-!|true|

****!
!*****> '''7.3.12.2 CONSUMER USER '''

'''7.3.12.2.1 TOS type '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|comment|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/tos/current|200|||
|let||js|!-response.jsonbody.ContentItem.type-!|tos|
|let||js|!-response.jsonbody.ContentItem.description-!|System Default TOS|

'''7.3.12.2.2 DISCLAIMER type '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/disclaimer/current|200|||
|let||js|!-response.jsonbody.ContentItem.type-!|disclaimer|
|let||js|!-response.jsonbody.ContentItem.description-!|System Default Disclaimer|

'''7.3.12.2.3 ALERTS type '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/alerts/current|200|||

'''7.3.12.2.4 invalid type '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/%institutionId1%/contentitems/invalid/current|200|||

'''7.3.12.2.5 invalid institutionId '''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|GET|/123213/contentitems/tos/current|200|||
|comment|DDB-73|
****!
****!
****!
!*****> '''7.4 DELETE FINANCIAL INSTITUTION'''
!*****> '''7.4.1 DELETE FINANCIAL INSTITUTION (/institutions//{institutionId}/contentitems/{contentitemId}/{contentType})'''

!*****> '''7.4.1.1 CONSUMER USER'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|DELETE|/123/contentitems/%contentItemID1%/disclaimer|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|

****!
!*****> '''7.4.1.2 INSIGHT USER'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|DELETE|/%institutionId1%/contentitems/%contentItemID1%/disclaimer|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|

****!
!*****> '''7.4.1.3 SYSTEM USER'''

'''7.4.1.3.1 Invalid institutionId'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/123/contentitems/%contentItemID1%/disclaimer|204|||

'''7.4.1.3.2 Invalid ContentItemID'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%/contentitems/123/disclaimer|404|||
|let|$errMsg|js|response.jsonbody.message|!--!|

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 30092 - Data requested by caller was not found. Type=storedContent-!|true|

'''7.4.1.3.3 Delete TOS content type of item'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%/contentitems/%contentItemID1%/tos|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300100 - Terms of Service cannot be deleted.-!|true|

'''7.4.1.3.4 Unmatching contentItemID and contentType'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%/contentitems/%contentItemID1%/alerts|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Argument usageType is invalid.-!|true|

'''7.4.1.3.5 Delete Alert content type of item'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%/contentitems/%contentItemID2%/alerts|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|ErrorCode: 300001 - Argument usageType is invalid.|true|

'''7.4.1.3.6 Attempt to re-delete content item'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%/contentitems/%contentItemID2%/alert|400|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300001 - Argument usageType is invalid.-!|true|

'''7.4.1.3.7 Delete Disclaimer content type of item'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%/contentitems/%contentItemID4%/disclaimer|204|||
|DELETE|/%institutionId1%/contentitems/%contentItemID1%/disclaimer|404|||
****!
****!
!*****> '''7.4.2 DELETE FINANCIAL INSTITUTION (/institutions//{institutionId})'''
!*****> '''7.4.2.1 CONSUMER USER'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${institutionNum}!- 
Content-Type : application/json
userToken : %encodedUserToken%-!|
|DELETE|/%institutionId1%|400|||
|let|$errMsg|js|response.jsonbody.message||


!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-ErrorCode: 300200 - Operation requires Admin User.-!|true|
****!
!*****> '''7.4.2.2 INSIGHT USER'''
|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${fiApiKey}!- 
Content-Type : application/json
userToken : %fiEncodedUserToken%-!|
|DELETE|/%institutionId1%|403|||
|let|$errMsg|js|response.jsonbody.message||

!|com.lodosoftware.fitnesse.fixtures.LodosoftwareFixtures|
|symbolName|str|isContain?|
|errMsg|!-Insight users do not have permission for this operation.-!|true|
****!
!*****> '''7.4.2.3 SYSTEM USER'''

'''7.4.2.3.1 SYSTEM USER''' 

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%|204|||
|DELETE|/%institutionId2%|204|||

'''7.4.2.3.2 SYSTEM USER (attempt to re-delete)'''

|!-smartrics.rest.fitnesse.fixture.RestFixture-!|http://${serverName}/d3rest/institutions|
|setHeader|!- appKey : -!${adminApiKey}!- 
Content-Type : application/json
userToken : %encodedAdminUserToken%-!|
|DELETE|/%institutionId1%|204|||
|DELETE|/%institutionId2%|204|||
|DELETE|/%institutionId3%|204|||
****!
****!
****!
!*****> Clean-up Test Data


!|Execute|!-delete from [STORED_CONTENT] where ID = -!@contentItemID3!-
            delete from [STORED_CONTENT] where ID = -!@contentItemID11|

!|DatabaseEnvironment|
|commit|
****!
****!